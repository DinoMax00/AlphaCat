#ifndef BOARD_H
#define BOARD_H



#include <string>
#include <vector>

#include "base.h"
#include "move.h"
/********************************************************
ç±»åç§°ï¼šBoard
åŠŸèƒ½ï¼šé€šè¿‡16*16çš„æ£‹ç›˜æ¥è¡¨ç¤ºæ£‹ç›˜ï¼Œä»¥å‡å°9*10çš„æ£‹ç›˜çš„é™¤æ³•å¯¹æ•ˆç‡å½±å“?
å‘¨å›´æ”¾ç½®å“¨å…µé˜²æ­¢å¤§é‡çš„è¾¹ç•Œæ£€æµ?
********************************************************/
class Board
{
public:
	bool player = 1;							//å½“å‰èµ°æ£‹ç©å®¶
	unsigned char board[256];				//æ£‹ç›˜ä¸ŠæŸä¸€ä½ä¸Šçš„æ£‹å­?
	unsigned char pos_of_kings[2];			//æ£‹ç›˜ä¸Šå°†å¸…çš„ä½ç½®
	int redValue;							// çº¢æ£‹å­åŠ›
	int blackValue;							// é»‘æ£‹å­åŠ›
	int gameVal;
	//unsigned int num_of_move[8];			//æ¯ä¸€ç§æ£‹å­çš„èµ°æ£‹æ–¹æ¡ˆæ•?
	//unsigned int num_of_chess;				//å½“å‰æ£‹ç›˜çš„æ£‹å­ä¸ªæ•?
	//unsigned int num_of_rounds;				//å›åˆæ•?
	//unsigned int num_of_no_eat_rounds;		//æœªåƒå­çš„å›åˆæ•?
	//unsigned long long zobrist;				//å½“å‰æ£‹ç›˜çš„Zobristé”®å€?

	std::vector<Move> mov;					//è®°å½•å½“å‰æ£‹ç›˜æ‰€æœ‰å¯è¡Œçš„èµ°æ³•
	
	//æˆå‘˜å‡½æ•°
	/****************************************
	åç§°ï¼šBoard()
	åŠŸèƒ½ï¼šé»˜è®¤æ„é€ å‡½æ•?
	å‚æ•°ï¼šæ— 
	è¿”å›å€¼ï¼šæ„é€ çš„Boardå¯¹è±¡
	****************************************/
	Board();

	/****************************************
	åç§°ï¼šBoard()
	åŠŸèƒ½ï¼šè¯»å–FENæ ¼å¼æ¥åˆå§‹åŒ–å¯¹è±¡çš„æ„é€ å‡½æ•?
	å‚æ•°ï¼šconst char* fenï¼Œæ„é€ å½“å‰å±€é¢çš„FENæ ¼å¼ä¸?
	è¿”å›å€¼ï¼šæ„é€ çš„Boardå¯¹è±¡
	****************************************/
	Board(std::string fen);

	/****************************************
	åç§°ï¼šBoard()
	åŠŸèƒ½ï¼šè¯»å–FENæ ¼å¼æ¥åˆå§‹åŒ–å¯¹è±¡çš„æ„é€ å‡½æ•?
	å‚æ•°ï¼šconst char* fenï¼Œæ„é€ å½“å‰å±€é¢çš„FENæ ¼å¼ä¸?
	è¿”å›å€¼ï¼šæ„é€ çš„Boardå¯¹è±¡
	****************************************/
	Board(Board*, Move&);

	/****************************************
	åç§°ï¼šbuildBoardFromFen()
	åŠŸèƒ½ï¼šé€šè¿‡FENæ•°ç»„æ¥åˆå§‹åŒ–å¯¹è±¡
	å‚æ•°ï¼šstring fenï¼Œæ„é€ å½“å‰å±€é¢çš„FENæ ¼å¼ä¸?,bool whether_get_all é»˜è®¤ GET_ALLå¯¹æ–°å±€é¢ç”Ÿæˆæ‰€æœ‰å¯è¡Œèµ°æ³?
	è¿”å›å€¼ï¼šæ„é€ çš„Boardå¯¹è±¡
	****************************************/
	void buildBoardFromFen(std::string fen);

	/****************************************
	åç§°ï¼šgenOneMove()
	åŠŸèƒ½ï¼šé€šè¿‡moveæ•°ç»„æ¥ç§»åŠ?
	å‚æ•°ï¼šstring moveï¼Œæ„é€ å½“å‰å±€é¢çš„ç§»åŠ¨ä¸?,bool whether_get_all é»˜è®¤ GET_ALLå¯¹æ–°å±€é¢ç”Ÿæˆæ‰€æœ‰å¯è¡Œèµ°æ³?
	è¿”å›å€¼ï¼š
	****************************************/
	void genOneMove(std::string& move);
	void genOneMove(Move& move);

	/****************************************
	åç§°ï¼šprintBoardForDebug()
	åŠŸèƒ½ï¼šæ‰“å°æ£‹ç›˜çœ‹æŸ¥æƒ…å†?
	å‚æ•°ï¼?
	è¿”å›å€¼ï¼š
	****************************************/
	void printBoardForDebug();
	void printBoardForDebug2();

	/****************************************
	åç§°ï¼šgenerateMoves()
	åŠŸèƒ½ï¼šç”Ÿæˆæ‰€æœ‰èƒ½èµ°çš„æ­¥æ•°
	å‚æ•°ï¼?
	è¿”å›å€¼ï¼š
	****************************************/
	void generateMoves();
	void generateMoves(bool);

	/****************************************
	åç§°ï¼šdeleteOneMove()
	åŠŸèƒ½ï¼šè¿”å›ä¸Šä¸€æ­¥çš„å±€é?
	å‚æ•°ï¼?
	è¿”å›å€¼ï¼š
	****************************************/
	void deleteOneMove(Move&);


	/****************************************
	åç§°ï¼šrandomRunMove()
	åŠŸèƒ½ï¼šç»™å‡ºéšæœºèµ°æ³?
	å‚æ•°ï¼?
	è¿”å›å€¼ï¼š
	****************************************/
	Move randomRunMove();

	/*******************************************
	å‡½æ•°åç§°ï¼šcheckJiang
	åŠŸèƒ½ï¼šåœ¨generateMovesä¸­è¿›è¡Œè°ƒç”¨ï¼Œåˆ¤æ–­åœ¨æ‰§è¡ŒæŸä¸€æ¬¡çš„èµ°å­ä¹‹åï¼Œæ˜¯å¦æ„æˆå°†å†?
	å‚æ•°ï¼šint from, int to,è¦è¿›è¡Œçš„èµ°å­çš„èµ·ç‚¹å’Œç»ˆç‚¹
	è¿”å›å€¼ï¼šbool åˆ¤æ–­æ˜¯å¦å°†å†›
	*******************************************/
	bool checkJiang(Move& mov);
	bool checkJiang(Move& mov, bool);

	/*******************************************
	å‡½æ•°åç§°ï¼šmctsMove
	åŠŸèƒ½ï¼šè’™ç‰¹å¡æ´›æœç´¢ä¸­çš„éšæœºèµ°å­?
	å‚æ•°ï¼?
	è¿”å›å€¼ï¼šGameStatus
	*******************************************/
	GameStatus mctsMove();
	void updGameVal();
};


#endif